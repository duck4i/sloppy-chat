<!DOCTYPE html>
<html>
<head>
    <title>Simple Chat App</title>
</head>
<body>
    <ul id="messages"></ul>
    <form id="form" action="">
        <input id="input" autocomplete="off" /><button>Send</button>
    </form>

    <script>
        const host = window.location.host;
        const socket = new WebSocket(`ws://${host}`);

        socket.onopen = () => {
            console.log("Conn established");
        }
        
        socket.onclose = () => {
            console.log("Conn closed");
        }

        socket.onerror = (err) => {
            console.log("Error", err);
        }

        // Listen for messages from the server
        socket.onmessage = function(event) {
            const item = document.createElement('li');
            item.textContent = event.data;
            document.getElementById('messages').appendChild(item);
        };

        // Send message on form submit
        document.getElementById('form').onsubmit = function(e) {
            e.preventDefault();
            const input = document.getElementById('input');
            socket.send(input.value); // Send message to the server
            input.value = '';
            return false;
        };
    </script>
</body>
</html>